.checkbox {
    display: flex;
    user-select: none;
    width: var(--width);
    align-items: center;
    box-sizing: border-box;
    justify-content: space-between;
    height: var(--checkbox-container-height);
    margin: var(--checkbox-container-margin);
    cursor: var(--checkbox-container-cursor);
    padding: var(--checkbox-container-padding);

    &:hover {
        input:not(:checked):not(:disabled) {
            ~.checkbox-border {
                background: var(--checkbox-border-hover-color);

                .checkbox-background {
                    background: var(--checkbox-background-hover-color);
                }
            }

            ~.label-container {
                color: var(--checkbox-label-hover-color);
            }

            ~.checkbox-border::before {
                background: var(--checkbox-overlay-hover-color);
            }
        }

        &:not(:active) {
            input:checked:not(:disabled):not(:focus) {
                ~.checkbox-border {
                    background: var(--checkbox-checked-border-hover-color);

                    .checkbox-background {
                        background: var(--checkbox-checked-background-hover-color);

                        svg {
                            fill: var(--checkbox-checkmark-hover-color);
                        }
                    }
                }

                ~.label-container {
                    color: var(--checkbox-checked-label-hover-color);
                }

                ~.checkbox-border::before {
                    background: var(--checkbox-checked-overlay-hover-color);
                }
            }

            input:checked:not(:disabled) {
                ~.checkbox-border {
                    background: var(--checkbox-focused-border-hover-color);

                    .checkbox-background {
                        background: var(--checkbox-focused-background-hover-color);

                        svg {
                            fill: var(--checkbox-focused-checkmark-hover-color);
                        }
                    }
                }

                ~.label-container {
                    color: var(--checkbox-focused-label-hover-color);
                }

                ~.checkbox-border::before {
                    background: var(--checkbox-focused-overlay-hover-color);
                }
            }
        }
    }

    &:active {
        input:not(:checked):not(:disabled) {
            ~.checkbox-border {
                background: var(--checkbox-border-active-color);

                .checkbox-background {
                    background: var(--checkbox-background-active-color);
                }
            }

            ~.label-container {
                color: var(--checkbox-label-active-color);
            }

            ~.checkbox-border::before {
                background: var(--checkbox-overlay-active-color);
            }
        }

        input:checked:not(:disabled) {
            ~.checkbox-border {
                background: var(--checkbox-checked-border-active-color);

                .checkbox-background {
                    background: var(--checkbox-checked-background-active-color);

                    svg {
                        fill: var(--checkbox-checkmark-active-color);
                    }
                }
            }

            ~.label-container {
                color: var(--checkbox-checked-label-active-color);
            }

            ~.checkbox-border::before {
                background: var(--checkbox-checked-overlay-active-color);
            }
        }
    }

    &[disabled=true] {
        cursor: default;
    }
}


.checkbox:hover:not(.no-hover-background):not([disabled=true]) {
    background: var(--checkbox-container-background-hover-color);
}



input {
    margin: 0;
    padding: 0;
    appearance: none;
    position: absolute;

    &:checked:not(:disabled) {
        ~.checkbox-border {
            background: var(--checkbox-checked-border-color);

            .checkbox-background {
                background: var(--checkbox-checked-background-color);

                svg {
                    display: block;
                }
            }
        }

        ~.label-container {
            color: var(--checkbox-checked-label-color);
        }
    }

    &:focus:not(:checked) {
        ~.checkbox-border::before {
            background: var(--checkbox-overlay-focus-color);
        }
    }

    &:focus {
        ~.checkbox-border::before {
            background: var(--checkbox-checked-overlay-focus-color);
        }
    }

    &:focus-visible:not(:checked) {
        ~.checkbox-border::before {
            background: var(--checkbox-overlay-focus-visible-color);
        }
    }

    &:focus-visible {
        ~.checkbox-border::before {
            background: var(--checkbox-checked-overlay-focus-visible-color);
        }
    }

    &:disabled {
        ~.checkbox-border {
            background: var(--checkbox-border-disabled-color);

            .checkbox-background {
                background: var(--checkbox-background-disabled-color);

                svg {
                    fill: transparent;
                }
            }
        }

        ~.label-container {
            color: var(--checkbox-label-disabled-color);
        }
    }
}



.checkbox-border {
    display: flex;
    position: relative;
    align-items: center;
    box-sizing: border-box;
    justify-content: center;
    width: var(--checkbox-size);
    height: var(--checkbox-size);
    padding: var(--border-width);
    background: var(--checkbox-border-color);
    border-radius: var(--border-radius);

    &::before {
        content: "";
        flex-shrink: 0;
        border-radius: 50%;
        position: absolute;
        pointer-events: none;
        width: var(--overlay-size);
        height: var(--overlay-size);
    }
}



.checkbox-background {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--checkbox-background-color);
    border-radius: var(--background-border-radius);
}



svg {
    display: none;
    position: absolute;
    width: var(--checkmark-size);
    height: var(--checkmark-size);
    fill: var(--checkbox-checkmark-color);
}



.label-container {
    color: var(--checkbox-label-color);
    font-size: var(--checkbox-label-font-size);
    font-family: var(--checkbox-label-font-family);
}